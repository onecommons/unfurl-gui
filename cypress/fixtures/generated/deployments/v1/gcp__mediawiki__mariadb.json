{"DeploymentTemplate":{"gcp-mariadb":{"name":"gcp-mariadb","title":"gcp mariadb","cloud":"unfurl.relationships.ConnectsTo.GoogleCloudProject","description":"Deploy using Google Compute Engine","__typename":"DeploymentTemplate","slug":"gcp-mariadb","blueprint":"mediawiki","primary":"the_app","resourceTemplates":["db-dockerhost","the_app","container_service","configurator-artifacts","dockerhost-aws-bootimage","aws_metadata","gcp_artifacts","dockerhost-gcp-bootimage","gcp_metadata","__typename","dockerhost","googlecloud-sqlstorage-mysql","digitalocean-dns","compute"],"ResourceTemplate":{"db-dockerhost":{"type":"unfurl.nodes.DockerComputeHost","name":"db-dockerhost","title":"db-dockerhost","description":"","directives":[],"properties":[],"dependencies":[],"computedProperties":[],"__typename":"ResourceTemplate"}},"projectPath":"blueprints/mediawiki","source":"gcp"}},"ApplicationBlueprint":{"mediawiki":{"name":"mediawiki","__typename":"ApplicationBlueprint","title":"Mediawiki","primary":"Mediawiki","deploymentTemplates":["gcp","aws","gcp-mariadb"],"description":null,"livePreview":null,"sourceCodeUrl":null,"image":null,"primaryDeploymentBlueprint":"gcp"}},"DefaultTemplate":{"dockerhost-gcp-bootimage":{"name":"dockerhost-gcp-bootimage","type":"unfurl.nodes.GCPBootImage","title":"dockerhost-gcp-bootimage","description":"","directives":["default"],"properties":[{"name":"project","value":"cos-cloud"},{"name":"family","value":"cos-85-lts"}],"dependencies":[{"constraint":{"name":"configures","title":"configures","description":"","min":0,"max":1,"match":null,"resourceType":"tosca.nodes.Root","visibility":"visible"},"name":"configures","__typename":"Requirement"}],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"aws_metadata":{"name":"aws_metadata","type":"unfurl.nodes.AWSMetadata","title":"aws_metadata","description":"","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"gcp_artifacts":{"name":"gcp_artifacts","type":"unfurl.nodes.LocalRepository","title":"gcp_artifacts","description":"","directives":["default"],"properties":[{"name":"repository","value":null},{"name":"url","value":null},{"name":"credential","value":null}],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"gcp_metadata":{"name":"gcp_metadata","type":"unfurl.nodes.GCPMetadata","title":"gcp_metadata","description":"","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"db-dockerhost":{"name":"db-dockerhost","type":"unfurl.nodes.DockerHost","title":"db-dockerhost","description":"This is an incomplete, placeholder template that needs to be defined in your blueprint","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"configurator-artifacts":{"name":"configurator-artifacts","type":"unfurl.nodes.LocalRepository","title":"configurator-artifacts","description":"","directives":["default"],"properties":[{"name":"repository","value":null},{"name":"url","value":null},{"name":"credential","value":null}],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"dockerhost-aws-bootimage":{"name":"dockerhost-aws-bootimage","type":"unfurl.nodes.AMIBootImage","title":"dockerhost-aws-bootimage","description":"","directives":["default"],"properties":[{"name":"owner","value":"099720109477"},{"name":"name_regex","value":"focal"}],"dependencies":[{"constraint":{"name":"configures","title":"configures","description":"","min":0,"max":1,"match":null,"resourceType":"tosca.nodes.Root","visibility":"visible"},"name":"configures","__typename":"Requirement"}],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]}},"ResourceTemplate":{"the_app":{"name":"the_app","type":"Mediawiki","title":"the_app","description":"","directives":[],"properties":[{"name":"mediawiki_user","value":"mediawiki"},{"name":"mediawiki_password","value":{"get_env":"gcp_mariadb__the_app__mediawiki_password"}},{"name":"mediawiki_email","value":"cy.preston@unfurl.cloud"},{"name":"mediawiki_database_user","value":"bn_mediawiki"},{"name":"mediawiki_database_password","value":{"get_env":"gcp_mariadb__the_app__mediawiki_database_password"}},{"name":"subdomain","value":"jun080512"}],"dependencies":[{"constraint":{"name":"db","title":"Database Instance","description":"","min":1,"max":1,"match":null,"resourceType":"MySQLDB","visibility":"visible"},"name":"db","__typename":"Requirement","completionStatus":"created","valid":true,"match":"googlecloud-sqlstorage-mysql"},{"constraint":{"name":"container","title":"container","description":"","visibility":"hidden","min":1,"max":1,"match":"container_service","resourceType":"unfurl.nodes.ContainerService"},"name":"container","__typename":"Requirement","match":"container_service"}],"__typename":"ResourceTemplate","computedProperties":[]},"container_service":{"name":"container_service","type":"unfurl.nodes.ContainerService","title":"container_service","description":"","directives":[],"properties":[{"name":"container","value":{"image":"bitnami/mediawiki:latest","ports":["8081:8080"],"environment":{"eval":{"to_env":{"BITNAMI_DEBUG":"true","MEDIAWIKI_ENABLE_HTTPS":"yes","MEDIAWIKI_USER":{"eval":".configured_by::mediawiki_user"},"MEDIAWIKI_PASSWORD":{"eval":".configured_by::mediawiki_password"},"MEDIAWIKI_EMAIL":{"eval":".configured_by::mediawiki_email"},"MEDIAWIKI_WIKI_NAME":{"eval":".configured_by::mediawiki_wiki_name"},"MEDIAWIKI_HOST":{"eval":"host"},"MEDIAWIKI_DATABASE_NAME":{"eval":".configured_by::mediawiki_database_name"},"MEDIAWIKI_DATABASE_USER":{"eval":".configured_by::mediawiki_database_user"},"MEDIAWIKI_DATABASE_PASSWORD":{"eval":".configured_by::mediawiki_database_password"},"MEDIAWIKI_DATABASE_HOST":{"eval":".configured_by::.targets::db::host"},"MEDIAWIKI_DATABASE_PORT_NUMBER":{"eval":".configured_by::.targets::db::port"},"MYSQL_CLIENT_DATABASE_HOST":{"eval":".configured_by::.targets::db::host"},"MYSQL_CLIENT_CREATE_DATABASE_NAME":{"eval":".configured_by::mediawiki_database_name"},"MYSQL_CLIENT_CREATE_DATABASE_USER":{"eval":".configured_by::mediawiki_database_user"},"MYSQL_CLIENT_CREATE_DATABASE_PASSWORD":{"eval":".configured_by::mediawiki_database_password"},"MYSQL_CLIENT_DATABASE_ROOT_USER":{"eval":".configured_by::.targets::db::root_user"},"MYSQL_CLIENT_DATABASE_ROOT_PASSWORD":{"eval":".configured_by::.targets::db::root_password"},"MYSQL_CLIENT_DATABASE_PORT_NUMBER":{"eval":".configured_by::.targets::db:port"},"MEDIAWIKI_SMTP_HOST":{"eval":".configured_by::.targets::mail::host"},"MEDIAWIKI_SMTP_PORT":{"eval":".configured_by::.targets::mail::port"},"MEDIAWIKI_SMTP_USER":{"eval":".configured_by::.targets::mail::user_name"},"MEDIAWIKI_SMTP_PASSWORD":{"eval":".configured_by::.targets::mail::password"}}}}}}],"dependencies":[{"constraint":{"name":"host","title":"host","description":"","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.DockerHost","visibility":"hidden"},"name":"host","__typename":"Requirement","match":"dockerhost"}],"__typename":"ResourceTemplate","computedProperties":[]},"dockerhost":{"name":"dockerhost","type":"unfurl.nodes.TraefikDockerComputeHost","title":"dockerhost","description":"","directives":[],"properties":[],"dependencies":[{"constraint":{"name":"dns","title":"DNS","description":"DNS provider for domain name configuration","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.DNSZone","visibility":"visible"},"name":"dns","__typename":"Requirement","completionStatus":"created","valid":true,"match":"digitalocean-dns"},{"constraint":{"name":"host","title":"Compute","description":"A compute instance with at least 512MB RAM","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.Compute","node_filter":{"properties":[{"user_data":{"eval":".configured_by::user_data"}},{"portspec":{"eval":".configured_by::portspec"}}]},"visibility":"visible"},"name":"host","__typename":"Requirement","completionStatus":"created","valid":true,"match":"compute"}],"computedProperties":[],"__typename":"ResourceTemplate"},"googlecloud-sqlstorage-mysql":{"name":"googlecloud-sqlstorage-mysql","type":"GoogleSQLStorageMySQL","title":"GoogleCloud SQLStorage MySQL","__typename":"ResourceTemplate","properties":[{"name":"root_user","value":"root"},{"name":"root_password","value":{"get_env":"gcp_mariadb__googlecloud_sqlstorage_mysql__root_password"}}],"dependencies":[]},"digitalocean-dns":{"name":"digitalocean-dns","type":"DigitalOceanDNSZone","title":"DigitalOcean DNS","__typename":"ResourceTemplate","properties":[{"name":"testing","value":true}],"dependencies":[]},"compute":{"name":"compute","type":"unfurl.nodes.GCPComputeInstance","title":"Compute","__typename":"ResourceTemplate","properties":[{"name":"num_cpus","value":1},{"name":"mem_size","value":2048},{"name":"disk_size","value":32}],"dependencies":[]}},"DeploymentPath":{"environments/production-gcp/blueprints/mediawiki/gcp-mariadb":{"name":"environments/production-gcp/blueprints/mediawiki/gcp-mariadb","__typename":"DeploymentPath","environment":"production-gcp"}}}
