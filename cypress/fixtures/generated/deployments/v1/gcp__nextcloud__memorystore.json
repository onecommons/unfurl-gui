{"DeploymentTemplate":{"memorystore":{"name":"memorystore","title":"memorystore","cloud":"unfurl.relationships.ConnectsTo.GoogleCloudProject","description":"Deploy using Google Compute Engine","__typename":"DeploymentTemplate","slug":"memorystore","blueprint":"nextcloud","primary":"the_app","resourceTemplates":["db-dockerhost","redis-dockerhost","the_app","container_service","dockerhost","__googleclouddnszone","compute","__mail-server","configurator-artifacts","dockerhost-aws-bootimage","aws_metadata","gcp_artifacts","dockerhost-gcp-bootimage","gcp_metadata","unfurl_service_account","googlecloud-memorystore-redis"],"ResourceTemplate":{},"environmentVariableNames":["APP_DATABASE_NAME","APP_FROM_ADDRESS","APP_MAIL_DOMAIN","APP_SUBDOMAIN","APP_ADMIN_EMAIL","APP_URL","CONTAINER_CONTAINER_IMAGE","CONTAINER_PROTOCOL","CONTAINER_HOST","CONTAINER_PORT","MAIL_HOST","MAIL_PORT","MAIL_USER_NAME","MAIL_AUTHENTICATION","MAIL_PASSWORD","MAIL_PROTOCOL","MAIL_STARTTLS_AUTO","DB_DATABASE_TYPE","DB_ROOT_USER","DB_ROOT_PASSWORD","DB_DATABASE_NAME","DB_SOFTWARE_VERSION","REDIS_SOFTWARE_VERSION","REDIS_PORT","REDIS_PASSWORD"],"projectPath":"blueprints/nextcloud","source":"gcp"}},"ResourceTemplate":{"db-dockerhost":{"name":"db-dockerhost","type":"unfurl.nodes.DockerComputeHost","title":"db-dockerhost","description":"","directives":[],"properties":[],"dependencies":[],"computedProperties":[],"__typename":"ResourceTemplate"},"redis-dockerhost":{"name":"redis-dockerhost","type":"unfurl.nodes.DockerComputeHost","title":"redis-dockerhost","description":"","directives":[],"properties":[],"dependencies":[],"computedProperties":[],"__typename":"ResourceTemplate"},"the_app":{"name":"the_app","type":"Nextcloud","title":"the_app","description":"","directives":[],"properties":[{"name":"database_name","value":"nextcloud"},{"name":"subdomain","value":"jun130213"}],"dependencies":[{"constraint":{"name":"container","title":"container","description":"","visibility":"hidden","min":1,"max":1,"match":"container_service","resourceType":"unfurl.nodes.ContainerService"},"name":"container","__typename":"Requirement","match":"container_service"},{"constraint":{"name":"mail","title":"Mail Server","description":"Mail server for user registration and notifications (can be configured after deployment)","min":0,"max":1,"match":null,"resourceType":"SMTPServer","visibility":"visible"},"name":"mail","__typename":"Requirement","completionStatus":"connected","valid":true,"match":"__mail-server"},{"name":"redis","constraint":{"name":"redis","title":"Redis Cache","description":"External cache for Nextcloud (optional)","min":0,"max":1,"match":null,"resourceType":"Redis","visibility":"visible"},"match":"googlecloud-memorystore-redis","target":null,"__typename":"Dependency","completionStatus":"created","valid":true}],"__typename":"ResourceTemplate","computedProperties":[]},"container_service":{"name":"container_service","type":"unfurl.nodes.ContainerService","title":"container_service","description":"","directives":[],"properties":[{"name":"container","value":{"image":"nextcloud","ports":["8080:80"],"volumes":["/var/app/nextcloud:/var/www/html"],"environment":{"eval":{"to_env":{"SQLITE_DATABASE":{"eval":{"if":".configured_by::.targets::db","then":null,"else":".configured_by::database_name"}},"POSTGRES_HOST":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::.targets::db::host","else":null}},"POSTGRES_USER":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::.targets::db::root_user","else":null}},"POSTGRES_PASSWORD":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::.targets::db::root_password","else":null}},"POSTGRES_DB":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::database_name","else":null}},"REDIS_HOST":{"eval":{"if":".configured_by::.targets::redis","then":".configured_by::.targets::redis::host","else":null}},"REDIS_HOST_PASSWORD":{"eval":{"if":".configured_by::.targets::redis","then":".configured_by::.targets::redis::password","else":null}},"SMTP_HOST":{"eval":".configured_by::.targets::mail::host"},"SMTP_NAME":{"eval":".configured_by::.targets::mail::user_name"},"SMTP_PASSWORD":{"eval":".configured_by::.targets::mail::password"},"MAIL_FROM_ADDRESS":{"eval":".configured_by::.targets::mail::from_address"},"MAIL_DOMAIN":{"eval":".configured_by::.targets::mail::mail_domain"}}}}}}],"dependencies":[{"constraint":{"name":"host","title":"host","description":"","min":0,"max":1,"match":null,"resourceType":"unfurl.nodes.DockerHost","visibility":"hidden"},"name":"host","__typename":"Requirement","match":"dockerhost"}],"__typename":"ResourceTemplate","computedProperties":[],"requirements":[{"host":{"node":"dockerhost"}}]},"dockerhost":{"name":"dockerhost","type":"unfurl.nodes.TraefikDockerComputeHost","title":"dockerhost","description":"","directives":[],"properties":[],"dependencies":[{"constraint":{"name":"dns","title":"DNS","description":"DNS provider for domain name configuration","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.DNSZone","visibility":"visible"},"name":"dns","__typename":"Requirement","completionStatus":"connected","valid":true,"match":"__googleclouddnszone"},{"constraint":{"name":"host","title":"Compute","description":"A compute instance with at least 1000MB RAM","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.Compute","node_filter":{"properties":[{"user_data":{"eval":".configured_by::user_data?"}},{"portspecs":{"eval":".configured_by::portspecs?"}}]},"visibility":"visible"},"name":"host","__typename":"Requirement","completionStatus":"created","valid":true,"match":"compute"}],"computedProperties":[],"__typename":"ResourceTemplate"},"__googleclouddnszone":{"name":"__googleclouddnszone","type":"GoogleCloudDNSZone","title":"GoogleCloudDNSZone","__typename":"ResourceTemplate","properties":[{"name":"name","value":"deploythis.io"},{"name":"testing","value":false}],"dependencies":[]},"compute":{"name":"compute","type":"unfurl.nodes.GCPComputeInstance","title":"Compute","__typename":"ResourceTemplate","properties":[{"name":"num_cpus","value":1},{"name":"mem_size","value":2048},{"name":"disk_size","value":32}],"dependencies":[]},"__mail-server":{"name":"__mail-server","type":"GenericSMTPServer","title":"Mail Server","__typename":"ResourceTemplate","properties":[{"name":"host","value":"mailu.untrusted.me"},{"name":"user_name","value":"admin@mailu.untrusted.me"},{"name":"password","value":{"get_env":"mail_server__password"}},{"name":"protocol","value":"tls"}],"dependencies":[]},"configurator-artifacts":{"name":"configurator-artifacts","type":"unfurl.nodes.LocalRepository","title":"configurator-artifacts","description":"","directives":["default"],"properties":[],"dependencies":[],"__typename":"ResourceTemplate"},"dockerhost-aws-bootimage":{"name":"dockerhost-aws-bootimage","type":"unfurl.nodes.AMIBootImage","title":"dockerhost-aws-bootimage","description":"","directives":["default"],"properties":[{"name":"owner","value":"099720109477"},{"name":"name_regex","value":"focal"}],"dependencies":[],"__typename":"ResourceTemplate"},"aws_metadata":{"name":"aws_metadata","type":"unfurl.nodes.AWSMetadata","title":"aws_metadata","description":"","directives":["default"],"properties":[],"dependencies":[],"__typename":"ResourceTemplate"},"gcp_artifacts":{"name":"gcp_artifacts","type":"unfurl.nodes.LocalRepository","title":"gcp_artifacts","description":"","directives":["default"],"properties":[],"dependencies":[],"__typename":"ResourceTemplate"},"dockerhost-gcp-bootimage":{"name":"dockerhost-gcp-bootimage","type":"unfurl.nodes.GCPBootImage","title":"dockerhost-gcp-bootimage","description":"","directives":["default"],"properties":[{"name":"project","value":"cos-cloud"},{"name":"family","value":"cos-97-lts"}],"dependencies":[],"__typename":"ResourceTemplate"},"gcp_metadata":{"name":"gcp_metadata","type":"unfurl.nodes.GCPMetadata","title":"gcp_metadata","description":"","directives":["default"],"properties":[],"dependencies":[],"__typename":"ResourceTemplate"},"unfurl_service_account":{"name":"unfurl_service_account","type":"UnfurlGoogleCloudServiceAccount","title":"unfurl_service_account","description":"","directives":["default","dependent"],"properties":[],"dependencies":[],"__typename":"ResourceTemplate"},"googlecloud-memorystore-redis":{"name":"googlecloud-memorystore-redis","type":"GoogleRedis","title":"GoogleCloud MemoryStore (Redis)","__typename":"ResourceTemplate","properties":[{"name":"memory_size_gb","value":1},{"name":"password","value":{"get_env":"memorystore__googlecloud_memorystore_redis__password"}}],"dependencies":[]}},"ApplicationBlueprint":{"nextcloud":{"name":"nextcloud","__typename":"ApplicationBlueprint","title":"Nextcloud","primary":"Nextcloud","deploymentTemplates":["Nextcloud"],"description":"A safe home for all your data. Access & share your files, calendars, contacts, mail & more from any device, on your terms.","livePreview":null,"sourceCodeUrl":null,"image":null,"projectIcon":null,"primaryDeploymentBlueprint":"gcp"}},"DeploymentPath":{"environments/gcp-2022-09-08t16-51-09/blueprints/nextcloud/memorystore":{"name":"environments/gcp-2022-09-08t16-51-09/blueprints/nextcloud/memorystore","__typename":"DeploymentPath","environment":"gcp-2022-09-08t16-51-09","project_id":464,"pipelines":[{"id":2091,"flags":{"stuck":false,"auto_devops":false,"merge_request":false,"yaml_errors":false,"retryable":false,"cancelable":true,"failure_reason":false,"detached_merge_request_pipeline":false,"merge_request_pipeline":false,"latest":true},"commit_id":"300d743bda17a60416133e48b63ee82818c85c64","variables":{"WORKFLOW":"deploy","DEPLOY_ENVIRONMENT":"gcp-2022-09-08t16-51-09","BLUEPRINT_PROJECT_URL":"https://app.dev.unfurl.cloud/blueprints/nextcloud.git","DEPLOY_PATH":"environments/gcp-2022-09-08t16-51-09/blueprints/nextcloud/memorystore","DEPLOYMENT":"memorystore"},"upstream_commit_id":null,"upstream_pipeline_id":null,"upstream_project_id":null}],"incremental_deploy":true}}}
