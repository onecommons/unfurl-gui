{"DeploymentTemplate":{"aws-postgres":{"name":"aws-postgres","title":"aws-postgres","cloud":"unfurl.relationships.ConnectsTo.AWSAccount","description":"Deploy using Amazon Elastic Compute Cloud (EC2)","__typename":"DeploymentTemplate","slug":"aws-postgres","blueprint":"nextcloud","primary":"the_app","resourceTemplates":["db-dockerhost","redis-dockerhost","the_app","container_service","configurator-artifacts","dockerhost-aws-bootimage","aws_metadata","gcp_artifacts","dockerhost-gcp-bootimage","gcp_metadata","__typename","dockerhost","__route53dnszone","ec2-instance","__mail-server","aws-rds-managed-postgressql"],"ResourceTemplate":{"db-dockerhost":{"type":"unfurl.nodes.DockerComputeHost","name":"db-dockerhost","title":"db-dockerhost","description":"","directives":[],"properties":[],"dependencies":[],"computedProperties":[],"__typename":"ResourceTemplate"},"redis-dockerhost":{"type":"unfurl.nodes.DockerComputeHost","name":"redis-dockerhost","title":"redis-dockerhost","description":"","directives":[],"properties":[],"dependencies":[],"computedProperties":[],"__typename":"ResourceTemplate"}},"projectPath":"blueprints/nextcloud","source":"aws"}},"ApplicationBlueprint":{"nextcloud":{"name":"nextcloud","__typename":"ApplicationBlueprint","title":"Nextcloud","primary":"Nextcloud","deploymentTemplates":["gcp","aws","selfhosted","aws-postgres"],"description":"A safe home for all your data. Access & share your files, calendars, contacts, mail & more from any device, on your terms.","livePreview":null,"sourceCodeUrl":null,"image":null,"projectIcon":"http://uc:3000/assets/uf-avatar-placeholder-5-45854ad5256389e0ba31e16acea60ed3f2a41c4f0a15dce54480faac5f7e6782.svg","primaryDeploymentBlueprint":"gcp"}},"DefaultTemplate":{"db-dockerhost":{"name":"db-dockerhost","type":"unfurl.nodes.DockerHost","title":"db-dockerhost","description":"This is an incomplete, placeholder template that needs to be defined in your blueprint","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"dockerhost-aws-bootimage":{"name":"dockerhost-aws-bootimage","type":"unfurl.nodes.AMIBootImage","title":"dockerhost-aws-bootimage","description":"","directives":["default"],"properties":[{"name":"owner","value":"099720109477"},{"name":"name_regex","value":"focal"}],"dependencies":[{"constraint":{"name":"configures","title":"configures","description":"","min":0,"max":1,"match":null,"resourceType":"tosca.nodes.Root","visibility":"visible"},"name":"configures","__typename":"Requirement"}],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"configurator-artifacts":{"name":"configurator-artifacts","type":"unfurl.nodes.LocalRepository","title":"configurator-artifacts","description":"","directives":["default"],"properties":[{"name":"repository","value":null},{"name":"url","value":null},{"name":"credential","value":null}],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"redis-dockerhost":{"name":"redis-dockerhost","type":"unfurl.nodes.DockerHost","title":"redis-dockerhost","description":"This is an incomplete, placeholder template that needs to be defined in your blueprint","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"gcp_artifacts":{"name":"gcp_artifacts","type":"unfurl.nodes.LocalRepository","title":"gcp_artifacts","description":"","directives":["default"],"properties":[{"name":"repository","value":null},{"name":"url","value":null},{"name":"credential","value":null}],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"aws_metadata":{"name":"aws_metadata","type":"unfurl.nodes.AWSMetadata","title":"aws_metadata","description":"","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"gcp_metadata":{"name":"gcp_metadata","type":"unfurl.nodes.GCPMetadata","title":"gcp_metadata","description":"","directives":["default"],"properties":[],"dependencies":[],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]},"dockerhost-gcp-bootimage":{"name":"dockerhost-gcp-bootimage","type":"unfurl.nodes.GCPBootImage","title":"dockerhost-gcp-bootimage","description":"","directives":["default"],"properties":[{"name":"project","value":"cos-cloud"},{"name":"family","value":"cos-85-lts"}],"dependencies":[{"constraint":{"name":"configures","title":"configures","description":"","min":0,"max":1,"match":null,"resourceType":"tosca.nodes.Root","visibility":"visible"},"name":"configures","__typename":"Requirement"}],"visibility":"hidden","__typename":"DefaultTemplate","computedProperties":[]}},"ResourceTemplate":{"the_app":{"name":"the_app","type":"Nextcloud","title":"the_app","description":"","directives":[],"properties":[{"name":"database_name","value":"nextcloud"},{"name":"subdomain","value":"nextcloud"},{"name":"from_address","value":"admin@mailu.untrusted.me"}],"dependencies":[{"constraint":{"name":"container","title":"container","description":"","visibility":"hidden","min":1,"max":1,"match":"container_service","resourceType":"unfurl.nodes.ContainerService"},"name":"container","__typename":"Requirement","match":"container_service"},{"constraint":{"name":"mail","title":"Mail Server","description":"Mail server for user registration and notifications (can be configured after deployment)","min":0,"max":1,"match":null,"resourceType":"SMTPServer","visibility":"visible"},"name":"mail","__typename":"Requirement","completionStatus":"connected","valid":true,"match":"__mail-server"},{"constraint":{"name":"db","title":"Database Instance","description":"External database for Nextcloud (optional)","min":0,"max":1,"match":null,"resourceType":"PostgresDB","node_filter":{"properties":[{"database_name":{"eval":".configured_by::database_name"}}]},"visibility":"visible"},"name":"db","__typename":"Requirement","completionStatus":"created","valid":true,"match":"aws-rds-managed-postgressql"}],"__typename":"ResourceTemplate","computedProperties":[]},"container_service":{"name":"container_service","type":"unfurl.nodes.ContainerService","title":"container_service","description":"","directives":[],"properties":[{"name":"container","value":{"image":"nextcloud","ports":["8080:80"],"volumes":["/var/app/nextcloud:/var/www/html"],"environment":{"eval":{"to_env":{"SQLITE_DATABASE":{"eval":{"if":".configured_by::.targets::db","then":null,"else":".configured_by::database_name"}},"POSTGRES_HOST":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::.targets::db::host","else":null}},"POSTGRES_USER":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::.targets::db::root_user","else":null}},"POSTGRES_PASSWORD":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::.targets::db::root_password","else":null}},"POSTGRES_DB":{"eval":{"if":".configured_by::.targets::db","then":".configured_by::database_name","else":null}},"REDIS_HOST":{"eval":{"if":".configured_by::.targets::redis","then":".configured_by::.targets::redis::host","else":null}},"REDIS_HOST_PASSWORD":{"eval":{"if":".configured_by::.targets::redis","then":".configured_by::.targets::redis::password","else":null}},"SMTP_HOST":{"eval":".configured_by::.targets::mail::host"},"SMTP_NAME":{"eval":".configured_by::.targets::mail::user_name"},"SMTP_PASSWORD":{"eval":".configured_by::.targets::mail::password"},"MAIL_FROM_ADDRESS":{"eval":".configured_by::.targets::mail::from_address"},"MAIL_DOMAIN":{"eval":".configured_by::.targets::mail::mail_domain"}}}}}}],"dependencies":[{"constraint":{"name":"host","title":"host","description":"","min":0,"max":1,"match":null,"resourceType":"unfurl.nodes.DockerHost","visibility":"hidden"},"name":"host","__typename":"Requirement","match":"dockerhost"}],"__typename":"ResourceTemplate","computedProperties":[]},"dockerhost":{"name":"dockerhost","type":"unfurl.nodes.TraefikDockerComputeHost","title":"dockerhost","description":"","directives":[],"properties":[],"dependencies":[{"constraint":{"name":"dns","title":"DNS","description":"DNS provider for domain name configuration","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.DNSZone","visibility":"visible"},"name":"dns","__typename":"Requirement","completionStatus":"connected","valid":true,"match":"__route53dnszone"},{"constraint":{"name":"host","title":"Compute","description":"A compute instance with at least 1000MB RAM","min":1,"max":1,"match":null,"resourceType":"unfurl.nodes.Compute","node_filter":{"properties":[{"user_data":{"eval":".configured_by::user_data"}},{"portspec":{"eval":".configured_by::portspec"}}]},"visibility":"visible"},"name":"host","__typename":"Requirement","completionStatus":"created","valid":true,"match":"ec2-instance"}],"computedProperties":[],"__typename":"ResourceTemplate"},"__route53dnszone":{"name":"__route53dnszone","type":"Route53DNSZone","title":"Route53DNSZone","__typename":"ResourceTemplate","properties":[{"name":"access_key_id","value":"AKIAVISQV7JAHDNJVS4B"},{"name":"secret_access_key","value":{"get_env":"route53dnszone__secret_access_key"}},{"name":"name","value":"opencloudservices.net"},{"name":"testing","value":true}],"dependencies":[]},"ec2-instance":{"name":"ec2-instance","type":"unfurl.nodes.EC2Compute","title":"EC2 Instance","__typename":"ResourceTemplate","properties":[{"name":"num_cpus","value":1},{"name":"mem_size","value":2048},{"name":"disk_size","value":32}],"dependencies":[]},"__mail-server":{"name":"__mail-server","type":"GenericSMTPServer","title":"Mail Server","__typename":"ResourceTemplate","properties":[{"name":"host","value":"mailu.untrusted.me"},{"name":"user_name","value":"admin@mailu.untrusted.me"},{"name":"password","value":{"get_env":"mail_server__password"}},{"name":"protocol","value":"tls"}],"dependencies":[]},"aws-rds-managed-postgressql":{"name":"aws-rds-managed-postgressql","type":"AwsRdsPostgres","title":"AWS RDS managed PostgresSQL","__typename":"ResourceTemplate","properties":[{"name":"root_user","value":"root"},{"name":"root_password","value":{"get_env":"amazon_web_services___ec2_1__aws_rds_managed_postgressql__root_password"}}],"dependencies":[]}},"DeploymentPath":{"environments/aws-2022-06-19t02-04-02/blueprints/nextcloud/aws-postgres":{"name":"environments/aws-2022-06-19t02-04-02/blueprints/nextcloud/aws-postgres","__typename":"DeploymentPath","environment":"aws-2022-06-19t02-04-02","projectId":49,"pipelines":[{"id":79,"flags":{"stuck":false,"auto_devops":false,"merge_request":false,"yaml_errors":false,"retryable":false,"cancelable":true,"failure_reason":false,"detached_merge_request_pipeline":false,"merge_request_pipeline":false,"latest":true},"commit":{"id":"f7a936bb4d28663ab426d2b19c81c9f4b602b49b","short_id":"f7a936bb","created_at":"2022-06-20T20:27:48.000+00:00","parent_ids":["fecd4552381333f59d498d48377e72923a3f2889"],"title":"Update deployment","message":"Update deployment","author_name":"user-2022-06-19T02-04-02","author_email":"user-2022-06-19t02-04-02@unfurl.cloud","authored_date":"2022-06-20T20:27:48.000+00:00","committer_name":"user-2022-06-19T02-04-02","committer_email":"user-2022-06-19t02-04-02@unfurl.cloud","committed_date":"2022-06-20T20:27:48.000+00:00","trailers":{},"web_url":"http://uc:3000/user-2022-06-19T02-04-02/dashboard/-/commit/f7a936bb4d28663ab426d2b19c81c9f4b602b49b","author":{"id":35,"name":"user-2022-06-19T02-04-02","username":"user-2022-06-19T02-04-02","state":"active","avatar_url":"https://www.gravatar.com/avatar/289a67522b781bb6d2314e4fd0376916?s=80&d=identicon","web_url":"http://uc:3000/user-2022-06-19T02-04-02","show_status":false,"path":"/user-2022-06-19T02-04-02"},"author_gravatar_url":"https://www.gravatar.com/avatar/289a67522b781bb6d2314e4fd0376916?s=80&d=identicon","commit_url":"http://uc:3000/user-2022-06-19T02-04-02/dashboard/-/commit/f7a936bb4d28663ab426d2b19c81c9f4b602b49b","commit_path":"/user-2022-06-19T02-04-02/dashboard/-/commit/f7a936bb4d28663ab426d2b19c81c9f4b602b49b"},"variables":{"WORKFLOW":"deploy","DEPLOY_ENVIRONMENT":"aws-2022-06-19t02-04-02","BLUEPRINT_PROJECT_URL":"http://uc:3000/blueprints/nextcloud.git","DEPLOY_PATH":"environments/aws-2022-06-19t02-04-02/blueprints/nextcloud/aws-postgres","DEPLOYMENT":"aws-postgres","DEPLOYMENT_BLUEPRINT":"aws"}}]}}}
